<!DOCTYPE html>
<html>
  <head>
    <title>MathQuill Tests</title>
    <link rel="stylesheet" type="text/css" href="mathquill.css">
    <style type="text/css">
      body{
        width:6.5in;
        margin:0 auto;
        font-family:"Times New Roman",serif;
        font-size:small;
      }
      td {
        width: 33%;
      }
      button {
        float: right;
      }
      .show-textareas .mathquill-textbox {
        overflow: visible;
      }
      .shown-textarea {
        position: relative;
        display: inline;
      }
      .shown-textarea textarea {
        position: absolute;
        top: -45px;
        user-select: text;
        -moz-user-select: text;
        -webkit-user-select: text;
      }
    </style>
  </head>
  <body>
    <h2><a href="http://laughinghan.github.com/mathquill">MathQuill 0.2&alpha;</a></h2>
    <p>by Jay and <a href="http://github.com/laughinghan">Han (laughinghan)</a></p>

    <button>Show Textareas</button>

    <h3>MathQuill Editables</h3>

    <table id="editables">
    <tr><th colspan=3>Initial LaTeX
    <tr>
      <td><span class="mathquill-editable">\frac{d}{dx}\sqrt{x}=\frac{1}{2\sqrt{x}}</span>
      <td><span class="mathquill-textbox">lolwut $a^2 + b^2 = c^2$.  Also, awesomesauce: $\int_0^1 \sin x dx.</span>
      <td><span class="mathquill-embedded-latex">\sqrt{\editable{x^2+y^2}}</span>
    </table>

    <p id="selection-performance"><b>Selection Performance</b>: <span class="mathquill-textbox">lolwut $a^2 + b^2 = c^2$.  Also, awesomesauce: $\int_0^1 \sin x dx.</span>

    <h3>Dynamic mathquill-ification</h3>
    <table id="dynamic">
    <tr><th colspan=3>Initial LaTeX
    <tr>
      <td><code>\frac{d}{dx}\sqrt{x} = \frac{d}{dx}x^{\frac{1}{2}} = \frac{1}{2}x^{-\frac{1}{2}} = \frac{1}{2\sqrt{x}}</code>
      <td><code>\frac{d}{dx}\sqrt{x} = \frac{d}{dx}x^{\frac{1}{2}} = \frac{1}{2}x^{-\frac{1}{2}} = \frac{1}{2\sqrt{x}}</code>
      <td><code>\frac{d}{dx}\sqrt{x} = \frac{d}{dx}x^{\frac{1}{2}} = \frac{1}{2}x^{-\frac{1}{2}} = \frac{1}{2\sqrt{x}}</code>
    <tr><th colspan=3><code>.mathquill('redraw')</code>
    <tr>
      <td><code>\sqrt{ \left ( \frac{x^2 + y^2}{2} \right ) } + \binom{n}{k}</code>
      <td><code>\sqrt{ \left ( \frac{x^2 + y^2}{2} \right ) } + \binom{n}{k}</code>
      <td><code>\sqrt{ \left ( \frac{x^2 + y^2}{2} \right ) } + \binom{n}{k}</code>
    </table>

    <h3>Static LaTeX rendering (<code>.mathquill-embedded-latex</code>) tests</h3>
    <table>
    <tr><td><span class="mathquill-embedded-latex">e^{i\pi}+1=0</span><td><code>e^{i\pi}+1=0</code>
    <tr><td><span class="mathquill-embedded-latex">\nthroot{n}{1}</span><td><code>\nthroot{n}{1}</code>
    <tr><td><span class="mathquill-embedded-latex">\left ( n+1 \right ) + \frac{1}{\frac{n}{k}}</span><td><code>\left ( n+1 \right ) + \frac{1}{\frac{n}{k}}</code>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript">
    window.onerror = function() {
      $('html').css('background', 'red');
    };
    </script>
    <script type="text/javascript" src="build/mathquill.js"></script>
    <script type="text/javascript">
    $('button').click(function() {
      $(document.body).toggleClass('show-textareas');
      $('.textarea,.shown-textarea').toggleClass('textarea shown-textarea');
    });
    document.body.onload = function() {
      setTimeout(function() {
        $('#selection-performance .mathquill-textbox').each(function() {
          var start = +new Date;
          $('textarea', this).focus().trigger({type: 'keydown', ctrlKey: true, which: 65});
          $(this).after(new Date - start);
        });
      });
    };
    $('#dynamic tr:eq(1)').each(function() {
      var math = $('code', this);
      math.eq(0).mathquill();
      math.eq(1).mathquill('editable');
      math.eq(2).mathquill('editable').mathquill('revert');
    });
    $('#dynamic tr:eq(3)').each(function() {
      var math = $('code', this), td;
      td = math.eq(0).parent();
      math.eq(0).detach().mathquill().appendTo(td).mathquill('redraw');
      td = math.eq(1).parent();
      math.eq(1).detach().mathquill('editable').appendTo(td).mathquill('redraw');
      td = math.eq(2).parent();
      math.eq(2).detach().mathquill('editable').mathquill('revert').appendTo(td).mathquill('redraw');
    });
    </script>
  </body>
</html>
